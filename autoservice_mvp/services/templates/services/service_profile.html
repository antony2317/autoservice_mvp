{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'services/css/service_profile.css' %}">

{% endblock %}

{% block content %}
<div class="profile-container">
    <div class="profile-card">
        <div class="profile-header">
            <h2>{{ auto_service.name }}</h2>
            <p>{{ auto_service.address }}</p>
            <small>üìû {{ auto_service.phone }}</small>
        </div>

        <div class="profile-body">
            <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</h3>
            <form method="post">
                {% csrf_token %}
                {{ form.non_field_errors }}
                <div class="form-group">
                    <label for="id_name">–ù–∞–∑–≤–∞–Ω–∏–µ –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å–∞</label>
                    {{ form.name }}
                </div>
                <div class="form-group">
                    <label for="id_address">–ê–¥—Ä–µ—Å</label>
                    {{ form.address }}
                </div>
                <div class="form-group">
                    <label for="id_phone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    {{ form.phone }}
                </div>
                <button type="submit" name="update_profile" class="submit-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            </form>
        </div>

        <div class="photo-upload">
            <h3>–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å–∞</h3>
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                {{ photo_form.image }}
                <button type="submit" name="upload_photo" class="submit-btn">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ</button>
            </form>

            {% if auto_service.photos.exists %}
            <div class="gallery">
                {% for photo in auto_service.photos.all %}
                    <div class="photo-item">
                        <img src="{{ photo.image.url }}" alt="–§–æ—Ç–æ –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å–∞">
                        <form method="post" action="{% url 'services:delete_photo' photo.pk %}">
                            {% csrf_token %}
                            <button type="submit" title="–£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ">√ó</button>
                        </form>
                    </div>
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
